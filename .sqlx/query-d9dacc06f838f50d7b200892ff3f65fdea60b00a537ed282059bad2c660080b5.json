{
  "db_name": "PostgreSQL",
  "query": "\n            SELECT\n                mc.title as \"title!\",\n                mc.slug as \"slug!\",\n                COUNT(ae.id) FILTER (WHERE ae.timestamp >= NOW() - INTERVAL '5 minutes') as \"views_5m!\",\n                COUNT(ae.id) FILTER (WHERE ae.timestamp >= NOW() - INTERVAL '1 hour') as \"views_1h!\",\n                COUNT(ae.id) FILTER (WHERE ae.timestamp >= NOW() - INTERVAL '1 day') as \"views_1d!\",\n                COUNT(ae.id) FILTER (WHERE ae.timestamp >= NOW() - INTERVAL '7 days') as \"views_7d!\",\n                COUNT(ae.id) FILTER (WHERE ae.timestamp >= NOW() - INTERVAL '30 days') as \"views_30d!\"\n            FROM markdown_content mc\n            LEFT JOIN analytics_events ae ON ae.endpoint = 'GET /' || mc.source_id || '/' || mc.slug\n                AND ae.event_type = 'page_view'\n            GROUP BY mc.id, mc.title, mc.slug\n            ORDER BY \"views_7d!\" DESC NULLS LAST\n            LIMIT $1\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "title!",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "slug!",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "views_5m!",
        "type_info": "Int8"
      },
      {
        "ordinal": 3,
        "name": "views_1h!",
        "type_info": "Int8"
      },
      {
        "ordinal": 4,
        "name": "views_1d!",
        "type_info": "Int8"
      },
      {
        "ordinal": 5,
        "name": "views_7d!",
        "type_info": "Int8"
      },
      {
        "ordinal": 6,
        "name": "views_30d!",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Int8"
      ]
    },
    "nullable": [
      false,
      false,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "d9dacc06f838f50d7b200892ff3f65fdea60b00a537ed282059bad2c660080b5"
}
