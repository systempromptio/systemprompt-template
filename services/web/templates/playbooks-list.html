<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {{{HEAD_ASSETS}}}
  <title>Playbooks | {{ORG_NAME}}</title>
  <meta name="description" content="Machine-executable guides for CLI operations, development, and content creation" />
  <meta name="keywords" content="playbooks, guides, tutorials, cli, systemprompt" />
  <link rel="canonical" href="{{PLAYBOOK_URL}}" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="stylesheet" href="/css/playbook.css" />
  <link rel="stylesheet" href="/css/content-cards.css" />

  <!-- Open Graph -->
  <meta property="og:title" content="Playbooks | {{ORG_NAME}}" />
  <meta property="og:description" content="Machine-executable guides for CLI operations, development, and content creation" />
  <meta property="og:image" content="{{PLAYBOOK_IMAGE}}" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="{{PLAYBOOK_URL}}" />
  <meta property="og:site_name" content="{{ORG_NAME}}" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="{{TWITTER_HANDLE}}" />
  <meta name="twitter:title" content="Playbooks | {{ORG_NAME}}" />
  <meta name="twitter:description" content="Machine-executable guides for CLI operations, development, and content creation" />
  <meta name="twitter:image" content="{{PLAYBOOK_IMAGE}}" />

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Playbooks",
    "description": "Machine-executable guides for CLI operations, development, and content creation",
    "url": "{{PLAYBOOK_URL}}",
    "publisher": {
      "@type": "Organization",
      "name": "{{ORG_NAME}}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ORG_LOGO}}"
      }
    },
    "inLanguage": "en"
  }
  </script>
</head>
<body>
  <div class="playbook-background"></div>
  <div class="playbook-shape-left"></div>

  {{{HEADER}}}

  <main class="playbook-list">
    <header class="content-list-header">
      <div class="content-list-header__icon content-list-header__icon--playbook"></div>
      <h1>Playbooks</h1>
      <p class="subtitle">Machine-executable guides for CLI operations, development, and content creation</p>
    </header>

    <div class="playbook-controls">
      <div class="playbook-filters">
        <button class="playbook-filter-btn active" data-filter="all">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
          </svg>
          All
        </button>
        <button class="playbook-filter-btn" data-filter="guide">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
          </svg>
          Guide
        </button>
        <button class="playbook-filter-btn" data-filter="cli">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/>
          </svg>
          CLI
        </button>
        <button class="playbook-filter-btn" data-filter="build">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
          </svg>
          Build
        </button>
        <button class="playbook-filter-btn" data-filter="content">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
          </svg>
          Content
        </button>
        <button class="playbook-filter-btn" data-filter="validation">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          Validation
        </button>
      </div>
      <div class="playbook-sort">
        <label class="playbook-sort-label" for="playbook-sort">Sort:</label>
        <select id="playbook-sort" class="playbook-sort-select">
          <option value="title-asc">Title A-Z</option>
          <option value="title-desc">Title Z-A</option>
          <option value="date-desc">Newest First</option>
          <option value="date-asc">Oldest First</option>
        </select>
      </div>
    </div>

    <div class="playbook-grid posts posts--no-images" id="playbook-grid">
      {{{POSTS}}}
    </div>
  </main>

  <script>
  (function() {
    const grid = document.getElementById('playbook-grid');
    const filterBtns = document.querySelectorAll('.playbook-filter-btn');
    const sortSelect = document.getElementById('playbook-sort');

    // Apply filter from URL or button
    function applyFilter(filter) {
      filterBtns.forEach(b => b.classList.remove('active'));
      const activeBtn = document.querySelector(`.playbook-filter-btn[data-filter="${filter || 'all'}"]`);
      if (activeBtn) activeBtn.classList.add('active');
      grid.dataset.filter = filter || '';

      // Update URL without reload
      const url = new URL(window.location);
      if (filter && filter !== 'all') {
        url.searchParams.set('category', filter);
      } else {
        url.searchParams.delete('category');
      }
      window.history.replaceState({}, '', url);
    }

    // Check URL for initial filter
    const urlParams = new URLSearchParams(window.location.search);
    const initialFilter = urlParams.get('category');
    if (initialFilter) {
      applyFilter(initialFilter);
    }

    // Filter button clicks
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.dataset.filter;
        applyFilter(filter === 'all' ? '' : filter);
      });
    });

    // Sort functionality
    sortSelect.addEventListener('change', () => {
      const cards = Array.from(grid.querySelectorAll('a.content-card-link, a.blog-card-link'));
      const sortValue = sortSelect.value;

      cards.sort((a, b) => {
        const titleA = a.querySelector('.card-title')?.textContent?.toLowerCase() || '';
        const titleB = b.querySelector('.card-title')?.textContent?.toLowerCase() || '';
        const dateA = a.querySelector('.card-date, .meta-date')?.textContent || '';
        const dateB = b.querySelector('.card-date, .meta-date')?.textContent || '';

        switch(sortValue) {
          case 'title-asc':
            return titleA.localeCompare(titleB);
          case 'title-desc':
            return titleB.localeCompare(titleA);
          case 'date-desc':
            return new Date(dateB) - new Date(dateA);
          case 'date-asc':
            return new Date(dateA) - new Date(dateB);
          default:
            return 0;
        }
      });

      cards.forEach(card => grid.appendChild(card));
    });
  })();
  </script>

  {{{FOOTER}}}

  {{{SCRIPTS}}}
</body>
</html>
