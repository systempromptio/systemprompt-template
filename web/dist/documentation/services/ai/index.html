<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Resource Hints -->
<link rel="preconnect" href="/files/fonts/" crossorigin>
<link rel="dns-prefetch" href="/files/fonts/">

<!-- Font Preloading - Critical fonts loaded early -->
<link rel="preload" as="font" href="/files/fonts/Zepto/Zepto.woff" type="font/woff" crossorigin>
<link rel="preload" as="font" href="/files/fonts/OpenSans/OpenSans-Regular.ttf" type="font/truetype" crossorigin>

<!-- Critical CSS - Inlined to prevent FOUC -->
<style>
/* Prevent flash of unstyled content */
:root {
  --color-bg: #0a0a0f;
  --color-surface: #12121a;
  --color-text: #e8e8ed;
  --color-text-secondary: #9898a6;
  --orange-500: #f97316;
  --orange-600: #ea580c;
}
html {
  background-color: var(--color-bg);
  color: var(--color-text);
}
body {
  margin: 0;
  font-family: "OpenSans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background-color: var(--color-bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* Hide content until styles load to prevent layout shift */
.header, .site-header {
  min-height: 64px;
}
/* Font-face for immediate availability */
@font-face {
  font-family: "Zepto";
  src: url("/files/fonts/Zepto/Zepto.woff") format("woff");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "OpenSans";
  src: url("/files/fonts/OpenSans/OpenSans-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
</style>

<!-- Core Styles -->
<link rel="stylesheet" href="/css/core/variables.css">
<link rel="stylesheet" href="/css/core/fonts.css">
<link rel="stylesheet" href="/css/core/reset.css">
<link rel="stylesheet" href="/css/components/header.css">
<link rel="stylesheet" href="/css/components/footer.css">
<link rel="stylesheet" href="/css/components/mobile-menu.css">


  <!-- SEO Meta Tags -->
  <title>AI Services | systemprompt.io Documentation</title>
  <meta name="description" content="Configure AI providers including Anthropic, OpenAI, and Gemini. Set up model parameters, MCP integration, and smart routing between providers." />
  <meta name="author" content="SystemPrompt Team" />
  <meta name="keywords" content="ai, providers, anthropic, openai, gemini, models, mcp" />
  <link rel="canonical" href="https://systemprompt.io/documentation/services/ai" />

  <!-- Open Graph -->
  <meta property="og:title" content="AI Services" />
  <meta property="og:description" content="Configure AI providers including Anthropic, OpenAI, and Gemini. Set up model parameters, MCP integration, and smart routing between providers." />
  <meta property="og:image" content="/files/images/docs/services-ai.svg" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://systemprompt.io/documentation/services/ai" />
  <meta property="og:site_name" content="systemprompt.io" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@your_handle" />
  <meta name="twitter:creator" content="@your_handle" />
  <meta name="twitter:title" content="AI Services" />
  <meta name="twitter:description" content="Configure AI providers including Anthropic, OpenAI, and Gemini. Set up model parameters, MCP integration, and smart routing between providers." />
  <meta name="twitter:image" content="/files/images/docs/services-ai.svg" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />

  <!-- Styles -->
  <link rel="stylesheet" href="/css/docs.css" />
  <link rel="stylesheet" href="/css/syntax-highlight.css" />

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "AI Services",
    "description": "Configure AI providers including Anthropic, OpenAI, and Gemini. Set up model parameters, MCP integration, and smart routing between providers.",
    "image": "/files/images/docs/services-ai.svg",
    "author": {
      "@type": "Organization",
      "name": "systemprompt.io"
    },
    "publisher": {
      "@type": "Organization",
      "name": "systemprompt.io",
      "logo": {
        "@type": "ImageObject",
        "url": "https://systemprompt.io/files/images/logo.png"
      }
    },
    "datePublished": "",
    "dateModified": "",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://systemprompt.io/documentation/services/ai"
    },
    "keywords": "ai, providers, anthropic, openai, gemini, models, mcp",
    "inLanguage": ""
  }
  </script>

  <!-- BreadcrumbList Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://systemprompt.io"},
      {"@type": "ListItem", "position": 2, "name": "Documentation", "item": "https://systemprompt.io/documentation"},
      {"@type": "ListItem", "position": 3, "name": "AI Services", "item": "https://systemprompt.io/documentation/services/ai"}
    ]
  }
  </script>
</head>
<body class="docs-body">
  <div class="docs-background"></div>

  <header class="site-header">
  <nav class="site-nav">
    <a href="/" class="logo-link">
      <img src="/files/images/logo.svg" alt="systemprompt.io" class="logo-svg" />
    </a>
    <button class="mobile-menu-toggle" aria-label="Toggle navigation" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    <div class="nav-links">
      <div class="nav-dropdown">
        <a href="/documentation" class="nav-dropdown-trigger">
          Documentation
          <svg class="dropdown-arrow" viewBox="0 0 12 12" width="12" height="12">
            <path d="M2 4l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <div class="nav-dropdown-menu">
          <div class="dropdown-section">
            <h4>Getting Started</h4>
            <a href="/documentation">Overview</a>
            <a href="/documentation/installation">Installation</a>
            <a href="/documentation/playbooks">Playbooks</a>
          </div>
          <div class="dropdown-section">
            <h4>Configuration</h4>
            <a href="/documentation/config">Config</a>
            <a href="/documentation/services">Services</a>
            <a href="/documentation/extensions">Extensions</a>
          </div>
          <a href="/documentation" class="dropdown-view-all">View all documentation &rarr;</a>
        </div>
      </div>
      <div class="nav-dropdown">
        <a href="/blog" class="nav-dropdown-trigger">
          Blog
          <svg class="dropdown-arrow" viewBox="0 0 12 12" width="12" height="12">
            <path d="M2 4l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <div class="nav-dropdown-menu">
          <div class="dropdown-section">
            <h4>Categories</h4>
            <a href="/blog">All Posts</a>
            <a href="/blog?category&#x3D;announcement">Announcements</a>
            <a href="/blog?category&#x3D;article">Articles</a>
            <a href="/blog?category&#x3D;guide">Guides</a>
          </div>
        </div>
      </div>
      <div class="nav-dropdown">
        <a href="https://systemprompt.io/playbooks" class="nav-dropdown-trigger">
          Playbooks
          <svg class="dropdown-arrow" viewBox="0 0 12 12" width="12" height="12">
            <path d="M2 4l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <div class="nav-dropdown-menu">
          <div class="dropdown-section">
            <h4>Categories</h4>
            <a href="https://systemprompt.io/playbooks">All Playbooks</a>
            <a href="https://systemprompt.io/playbooks?category&#x3D;guide">Guides</a>
            <a href="https://systemprompt.io/playbooks?category&#x3D;cli">CLI</a>
            <a href="https://systemprompt.io/playbooks?category&#x3D;build">Build</a>
            <a href="https://systemprompt.io/playbooks?category&#x3D;content">Content</a>
          </div>
        </div>
      </div>
      <a href="/documentation/installation" class="cta-button">Get Started</a>
    </div>
  </nav>
</header>


  <div class="docs-layout">
    <!-- Left Sidebar - Navigation (dynamically rendered from config.yaml) -->
    <aside class="docs-sidebar">
      <nav class="docs-nav" aria-label="Documentation navigation">
        <div class="docs-nav-section">
          <h3 class="docs-nav-title">Getting Started</h3>
          <ul class="docs-nav-list">
            <li><a href="/documentation" class="docs-nav-link">Overview</a></li>
            <li><a href="/documentation/installation" class="docs-nav-link">Installation</a></li>
            <li><a href="/documentation/licensing" class="docs-nav-link">Licensing</a></li>
            <li><a href="/documentation/playbooks" class="docs-nav-link">Playbooks</a></li>
          </ul>
        </div>
        <div class="docs-nav-section">
          <h3 class="docs-nav-title">Config</h3>
          <ul class="docs-nav-list">
            <li><a href="/documentation/config" class="docs-nav-link">Overview</a></li>
            <li><a href="/documentation/config/database" class="docs-nav-link">Database</a></li>
            <li><a href="/documentation/config/deployment" class="docs-nav-link">Deployment</a></li>
            <li><a href="/documentation/config/docker" class="docs-nav-link">Docker</a></li>
            <li><a href="/documentation/config/domains" class="docs-nav-link">Domains</a></li>
            <li><a href="/documentation/config/profiles" class="docs-nav-link">Profiles</a></li>
            <li><a href="/documentation/config/secrets" class="docs-nav-link">Secrets</a></li>
            <li><a href="/documentation/config/sessions" class="docs-nav-link">Sessions</a></li>
            <li><a href="/documentation/config/sync" class="docs-nav-link">Sync</a></li>
            <li><a href="/documentation/config/tenants" class="docs-nav-link">Tenants</a></li>
          </ul>
        </div>
        <div class="docs-nav-section">
          <h3 class="docs-nav-title">Services</h3>
          <ul class="docs-nav-list">
            <li><a href="/documentation/services" class="docs-nav-link">Overview</a></li>
            <li><a href="/documentation/services/agents" class="docs-nav-link">Agents</a></li>
            <li><a href="/documentation/services/ai" class="docs-nav-link">AI</a></li>
            <li><a href="/documentation/services/analytics" class="docs-nav-link">Analytics</a></li>
            <li><a href="/documentation/services/auth" class="docs-nav-link">Auth</a></li>
            <li><a href="/documentation/services/config" class="docs-nav-link">Config</a></li>
            <li><a href="/documentation/services/content" class="docs-nav-link">Content</a></li>
            <li><a href="/documentation/services/files" class="docs-nav-link">Files</a></li>
            <li><a href="/documentation/services/mcp" class="docs-nav-link">MCP</a></li>
            <li><a href="/documentation/services/playbooks" class="docs-nav-link">Playbooks</a></li>
            <li><a href="/documentation/services/scheduler" class="docs-nav-link">Scheduler</a></li>
            <li><a href="/documentation/services/skills" class="docs-nav-link">Skills</a></li>
            <li><a href="/documentation/services/users" class="docs-nav-link">Users</a></li>
            <li><a href="/documentation/services/web" class="docs-nav-link">Web</a></li>
            <li><a href="/documentation/services/workflows" class="docs-nav-link">Workflows</a></li>
          </ul>
        </div>
        <div class="docs-nav-section">
          <h3 class="docs-nav-title">Extensions</h3>
          <ul class="docs-nav-list">
            <li><a href="/documentation/extensions" class="docs-nav-link">Overview</a></li>
            <li><a href="/documentation/extensions/template" class="docs-nav-link">Template Architecture</a></li>
            <li><a href="/documentation/extensions/hooks" class="docs-nav-link">Lifecycle Hooks</a></li>
            <li><a href="/documentation/extensions/rust" class="docs-nav-link">Library Extensions</a></li>
            <li><a href="/documentation/extensions/web" class="docs-nav-link">Web Extensions</a></li>
            <li><a href="/documentation/extensions/page-data-providers" class="docs-nav-link">Page Data Providers</a></li>
            <li><a href="/documentation/extensions/component-renderers" class="docs-nav-link">Component Renderers</a></li>
            <li><a href="/documentation/extensions/jobs" class="docs-nav-link">Background Jobs</a></li>
            <li><a href="/documentation/extensions/mcp" class="docs-nav-link">MCP Extensions</a></li>
            <li><a href="/documentation/extensions/cli" class="docs-nav-link">CLI Extensions</a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="docs-main">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a>
        <span class="breadcrumb__separator">/</span>
        <a href="/documentation">Documentation</a>
        <span class="breadcrumb__separator">/</span>
        <span class="breadcrumb__current">AI Services</span>
      </nav>

      <article class="docs-article">
        <header class="docs-header">
          <div class="docs-title-row">
            <h1>AI Services</h1>
            <button class="docs-export-btn" data-slug="services/ai" aria-label="Copy as Markdown" title="Copy as Markdown">
              <svg class="copy-icon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"/>
                <path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"/>
              </svg>
              <svg class="check-icon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 1 1 1.06-1.06L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/>
              </svg>
            </button>
          </div>
          <p class="docs-description">Configure AI providers including Anthropic, OpenAI, and Gemini. Set up model parameters, MCP integration, and smart routing between providers.</p>
          <div class="docs-meta">
            <time datetime="">Last updated: </time>
          </div>
        </header>

        <!-- Learning Objectives - Top Callout -->

        <!-- Mobile Table of Contents (shown â‰¤1200px) -->
        <div class="docs-toc-mobile">
          <details class="toc-mobile-details">
            <summary class="toc-mobile-summary">
              <span class="toc-mobile-label">On this page</span>
              <svg class="toc-mobile-chevron" viewBox="0 0 12 12" width="12" height="12" fill="none" stroke="currentColor">
                <path d="M2 4l4 4 4-4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </summary>
            <nav class="toc-mobile-nav" aria-label="Table of contents">
              <div class="toc-content toc-content--mobile">
                <ul class="toc-list">
<li class="toc-item toc-level-2">
<a class="toc-link" href="#the-problem">The Problem</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#how-ai-services-work">How AI Services Work</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#configuration">Configuration</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#providers">Providers</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#anthropic">Anthropic</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#openai">OpenAI</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#gemini">Gemini</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#web-search">Web Search</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#enabling-web-search">Enabling Web Search</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#web-search-capabilities">Web Search Capabilities</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#image-generation">Image Generation</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#supported-image-providers">Supported Image Providers</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#configuration-1">Configuration</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#capabilities">Capabilities</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#automatic-resolution-selection">Automatic Resolution Selection</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#usage">Usage</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#mcp-integration">MCP Integration</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#smart-routing">Smart Routing</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#environment-variables">Environment Variables</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#service-relationships">Service Relationships</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#configuration-reference">Configuration Reference</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#cli-reference">CLI Reference</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#provider-management">Provider Management</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#secrets-management">Secrets Management</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#other-ai-commands">Other AI Commands</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#troubleshooting">Troubleshooting</a>
</li>
</ul>

              </div>


            </nav>
          </details>
        </div>

        <div class="docs-content">
          <p><strong>TL;DR:</strong> The AI service configures which LLM providers power your agents. It supports Anthropic, OpenAI, and Gemini with automatic fallback, smart routing, and MCP tool integration. The AI service is the bridge between agents and the language models that enable reasoning.</p>
<h2 id="the-problem">The Problem</h2>
<p>Agents need access to language models for reasoning and generation. Different providers have different strengths, pricing, and availability. You might want Anthropic for complex reasoning, OpenAI for compatibility, or Gemini for cost efficiency.</p>
<p>The AI service solves this by providing a unified configuration for multiple providers. You can enable one or many providers, set defaults, and configure fallback behavior. The same agent configuration works regardless of which provider is active.</p>
<h2 id="how-ai-services-work">How AI Services Work</h2>
<p>The AI service manages the connection between agents and LLM providers. When an agent needs to generate a response, it sends the conversation to the AI service. The AI service selects a provider, formats the request, handles tool calls through MCP, and returns the response.</p>
<p>The selection logic considers:</p>
<ul>
<li>Which providers are enabled</li>
<li>The default provider setting</li>
<li>Smart routing rules (if enabled)</li>
<li>Fallback configuration (if the primary fails)</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>Configure AI providers in <code>services/ai/config.yaml</code>:</p>
<!-- raw HTML omitted -->
<pre><code class="language-yaml"># services/ai/config.yaml
ai:
  default_provider: anthropic
  default_max_output_tokens: 8192

  sampling:
    enable_smart_routing: false
    fallback_enabled: true

  providers:
    anthropic:
      enabled: true
      api_key: ${ANTHROPIC_API_KEY}
      default_model: claude-sonnet-4-20250514

    openai:
      enabled: false
      api_key: ${OPENAI_API_KEY}
      default_model: gpt-4-turbo

    gemini:
      enabled: true
      api_key: ${GEMINI_API_KEY}
      endpoint: https://generativelanguage.googleapis.com/v1beta
      default_model: gemini-2.5-flash

  mcp:
    auto_discover: true
    connect_timeout_ms: 5000
    execution_timeout_ms: 30000
    retry_attempts: 3

  history:
    retention_days: 30
    log_tool_executions: true
</code></pre>
<!-- raw HTML omitted -->
<h2 id="providers">Providers</h2>
<h3 id="anthropic">Anthropic</h3>
<p>Anthropic provides Claude models known for strong reasoning and safety:</p>
<pre><code class="language-yaml">anthropic:
  enabled: true
  api_key: ${ANTHROPIC_API_KEY}
  default_model: claude-sonnet-4-20250514
</code></pre>
<p>Available models:</p>
<ul>
<li><code>claude-sonnet-4-20250514</code> - Balanced performance and cost</li>
<li><code>claude-opus-4-20250514</code> - Most capable for complex tasks</li>
<li><code>claude-haiku-3-20240307</code> - Fast and economical</li>
</ul>
<h3 id="openai">OpenAI</h3>
<p>OpenAI provides GPT models with broad compatibility:</p>
<pre><code class="language-yaml">openai:
  enabled: true
  api_key: ${OPENAI_API_KEY}
  default_model: gpt-4-turbo
</code></pre>
<p>Available models:</p>
<ul>
<li><code>gpt-4-turbo</code> - Latest GPT-4 with large context</li>
<li><code>gpt-4o</code> - Optimized for speed</li>
<li><code>gpt-3.5-turbo</code> - Fast and economical</li>
</ul>
<h3 id="gemini">Gemini</h3>
<p>Google's Gemini provides multimodal capabilities:</p>
<pre><code class="language-yaml">gemini:
  enabled: true
  api_key: ${GEMINI_API_KEY}
  endpoint: https://generativelanguage.googleapis.com/v1beta
  default_model: gemini-2.5-flash
</code></pre>
<p>Available models:</p>
<ul>
<li><code>gemini-2.5-flash</code> - Fast multimodal processing</li>
<li><code>gemini-2.5-pro</code> - Advanced reasoning</li>
</ul>
<h2 id="web-search">Web Search</h2>
<p>Some providers support web search for grounded responses with real-time information.</p>
<h3 id="web-search">Enabling Web Search</h3>
<p>Add <code>google_search_enabled: true</code> to a provider's configuration:</p>
<pre><code class="language-yaml">providers:
  openai:
    enabled: true
    api_key: ${OPENAI_API_KEY}
    default_model: gpt-4-turbo
    google_search_enabled: true  # Enables OpenAI web search

  gemini:
    enabled: true
    api_key: ${GEMINI_API_KEY}
    default_model: gemini-2.5-flash
    google_search_enabled: true  # Enables Google Search grounding
</code></pre>
<h3 id="web-search-capabilities">Web Search Capabilities</h3>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Implementation</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gemini</td>
<td>Google Search grounding</td>
<td>Native integration, returns sources</td>
</tr>
<tr>
<td>OpenAI</td>
<td><code>/responses</code> API with web search tool</td>
<td>Uses <code>web_search</code> tool type</td>
</tr>
<tr>
<td>Anthropic</td>
<td>Not yet implemented</td>
<td>API supports <code>web_search_20250305</code> tool</td>
</tr>
</tbody>
</table>
<p>Web search is used by tools like <code>research_blog</code> in the content-manager MCP server.</p>
<h2 id="image-generation">Image Generation</h2>
<p>The AI service also supports image generation through the same provider configuration.</p>
<h3 id="providers">Supported Image Providers</h3>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Model</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gemini</td>
<td><code>gemini-2.5-flash-image</code></td>
<td>Fast image generation</td>
</tr>
<tr>
<td>Gemini</td>
<td><code>gemini-3-pro-image-preview</code></td>
<td>Higher quality images</td>
</tr>
<tr>
<td>OpenAI</td>
<td><code>dall-e-3</code></td>
<td>DALL-E 3 image generation</td>
</tr>
<tr>
<td>OpenAI</td>
<td><code>dall-e-2</code></td>
<td>DALL-E 2 image generation</td>
</tr>
</tbody>
</table>
<h3 id="configuration">Configuration</h3>
<p>Image generation uses the same provider configuration as text generation. If a provider is enabled with a valid API key, image generation is automatically available:</p>
<pre><code class="language-yaml">providers:
  gemini:
    enabled: true
    api_key: ${GEMINI_API_KEY}
    # Image generation uses same credentials

  openai:
    enabled: true
    api_key: ${OPENAI_API_KEY}
    # DALL-E uses same credentials
</code></pre>
<h3>Capabilities</h3>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Resolutions</th>
<th>Aspect Ratios</th>
<th>Batch</th>
<th>Editing</th>
</tr>
</thead>
<tbody>
<tr>
<td>Gemini</td>
<td>1K, 2K, 4K</td>
<td>Square, 16:9, 9:16, 4:3, 3:4, UltraWide</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>OpenAI</td>
<td>1K</td>
<td>Square, 16:9, 9:16</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3 id="automatic-resolution-selection">Automatic Resolution Selection</h3>
<p>The image service automatically selects the best resolution supported by the configured provider. When requesting an image, the service queries the provider's capabilities and chooses the highest supported resolution (4K &gt; 2K &gt; 1K).</p>
<p>This ensures cross-provider compatibility without hardcoding resolution values.</p>
<h3 id="usage">Usage</h3>
<p>Image generation is available through MCP tools like <code>generate_featured_image</code> in the content-manager server:</p>
<pre><code class="language-bash">systemprompt plugins mcp call content-manager generate_featured_image -a '{
  &quot;skill_id&quot;: &quot;blog_image_generation&quot;,
  &quot;topic&quot;: &quot;AI Development&quot;,
  &quot;title&quot;: &quot;Building with AI&quot;,
  &quot;summary&quot;: &quot;A guide to AI development&quot;
}' --timeout 120
</code></pre>
<p>Generated images are stored in <code>/files/images/generated/</code> and accessible via the configured URL prefix.</p>
<h2 id="mcp-integration">MCP Integration</h2>
<p>The AI service auto-discovers MCP servers and makes their tools available to the language model:</p>
<pre><code class="language-yaml">mcp:
  auto_discover: true          # Find MCP servers automatically
  connect_timeout_ms: 5000     # Connection timeout
  execution_timeout_ms: 30000  # Tool execution timeout
  retry_attempts: 3            # Retry failed tool calls
</code></pre>
<p>When <code>auto_discover</code> is enabled, the AI service finds all configured MCP servers and registers their tools. During conversations, the language model can call these tools to perform actions.</p>
<h2 id="smart-routing">Smart Routing</h2>
<p>When enabled, smart routing selects the best provider for each request:</p>
<pre><code class="language-yaml">sampling:
  enable_smart_routing: true
  fallback_enabled: true
</code></pre>
<p>Smart routing considers task complexity, cost, and provider availability. If the primary provider fails and fallback is enabled, the AI service tries alternative providers.</p>
<h2 id="environment-variables">Environment Variables</h2>
<p>Store API keys securely using environment variables:</p>
<pre><code class="language-bash"># Set via CLI
systemprompt cloud secrets set ANTHROPIC_API_KEY &quot;sk-ant-...&quot;
systemprompt cloud secrets set OPENAI_API_KEY &quot;sk-...&quot;
systemprompt cloud secrets set GEMINI_API_KEY &quot;AIza...&quot;
</code></pre>
<p>Never commit API keys to configuration files. Use the <code>${VAR_NAME}</code> syntax to reference environment variables.</p>
<h2 id="service-relationships">Service Relationships</h2>
<p>The AI service connects to:</p>
<ul>
<li><strong>Agents</strong> - Provides LLM capabilities for agent reasoning</li>
<li><strong>MCP servers</strong> - Auto-discovers tools for language model access</li>
<li><strong>Config service</strong> - Included through the aggregation pattern</li>
<li><strong>History</strong> - Logs conversations and tool executions</li>
</ul>
<h2 id="configuration-reference">Configuration Reference</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default_provider</code></td>
<td>string</td>
<td>Primary provider (anthropic, openai, gemini)</td>
</tr>
<tr>
<td><code>default_max_output_tokens</code></td>
<td>number</td>
<td>Maximum tokens for responses</td>
</tr>
<tr>
<td><code>sampling.enable_smart_routing</code></td>
<td>boolean</td>
<td>Enable intelligent provider selection</td>
</tr>
<tr>
<td><code>sampling.fallback_enabled</code></td>
<td>boolean</td>
<td>Try other providers on failure</td>
</tr>
<tr>
<td><code>mcp.auto_discover</code></td>
<td>boolean</td>
<td>Auto-discover MCP servers</td>
</tr>
<tr>
<td><code>history.retention_days</code></td>
<td>number</td>
<td>Days to retain conversation history</td>
</tr>
</tbody>
</table>
<h2 id="cli-reference">CLI Reference</h2>
<h3 id="provider-management">Provider Management</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>systemprompt admin config provider list</code></td>
<td>View all providers with status</td>
</tr>
<tr>
<td><code>systemprompt admin config provider set &lt;PROVIDER&gt;</code></td>
<td>Set default provider</td>
</tr>
<tr>
<td><code>systemprompt admin config provider enable &lt;PROVIDER&gt;</code></td>
<td>Enable a provider</td>
</tr>
<tr>
<td><code>systemprompt admin config provider disable &lt;PROVIDER&gt;</code></td>
<td>Disable a provider</td>
</tr>
</tbody>
</table>
<h3 id="secrets-management">Secrets Management</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>systemprompt cloud secrets set ANTHROPIC_API_KEY &lt;key&gt;</code></td>
<td>Set Anthropic API key</td>
</tr>
<tr>
<td><code>systemprompt cloud secrets set OPENAI_API_KEY &lt;key&gt;</code></td>
<td>Set OpenAI API key</td>
</tr>
<tr>
<td><code>systemprompt cloud secrets set GEMINI_API_KEY &lt;key&gt;</code></td>
<td>Set Gemini API key</td>
</tr>
<tr>
<td><code>systemprompt cloud secrets list</code></td>
<td>List configured secrets</td>
</tr>
</tbody>
</table>
<h3 id="other-ai-commands">Other AI Commands</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>systemprompt admin config show</code></td>
<td>Show current configuration including AI settings</td>
</tr>
<tr>
<td><code>systemprompt plugins mcp list</code></td>
<td>List MCP servers (AI integrates with these)</td>
</tr>
</tbody>
</table>
<p>See <code>systemprompt admin config provider --help</code> for detailed options.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p><strong>Provider authentication failed</strong> -- Verify the API key is set correctly. Check that the environment variable is available to the application.</p>
<p><strong>Tool execution timeout</strong> -- The MCP tool took too long. Increase <code>execution_timeout_ms</code> or optimize the tool.</p>
<p><strong>No providers available</strong> -- At least one provider must be enabled with valid credentials.</p>

        </div>

      </article>
    </main>

    <!-- Right Sidebar - Table of Contents & Related Links -->
    <aside class="docs-toc">
      <nav class="toc-nav" aria-label="Table of contents">
        <h3 class="toc-title">On this page</h3>
        <div class="toc-content">
          <ul class="toc-list">
<li class="toc-item toc-level-2">
<a class="toc-link" href="#the-problem">The Problem</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#how-ai-services-work">How AI Services Work</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#configuration">Configuration</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#providers">Providers</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#anthropic">Anthropic</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#openai">OpenAI</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#gemini">Gemini</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#web-search">Web Search</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#enabling-web-search">Enabling Web Search</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#web-search-capabilities">Web Search Capabilities</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#image-generation">Image Generation</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#supported-image-providers">Supported Image Providers</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#configuration-1">Configuration</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#capabilities">Capabilities</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#automatic-resolution-selection">Automatic Resolution Selection</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#usage">Usage</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#mcp-integration">MCP Integration</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#smart-routing">Smart Routing</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#environment-variables">Environment Variables</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#service-relationships">Service Relationships</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#configuration-reference">Configuration Reference</a>
</li>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#cli-reference">CLI Reference</a>
<ul class="toc-list toc-nested">
<li class="toc-item toc-level-3">
<a class="toc-link" href="#provider-management">Provider Management</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#secrets-management">Secrets Management</a>
</li>
<li class="toc-item toc-level-3">
<a class="toc-link" href="#other-ai-commands">Other AI Commands</a>
</li>
</ul>
<li class="toc-item toc-level-2">
<a class="toc-link" href="#troubleshooting">Troubleshooting</a>
</li>
</ul>

        </div>
      </nav>


    </aside>
  </div>

  <footer class="site-footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="footer-logo">
          <img src="/files/images/logo.svg" alt="systemprompt.io" class="logo-svg" />
        </div>
        <p></p>
      </div>
      <div class="footer-links">
        <h4>Product</h4>
        <a href="/documentation">Documentation</a>
        <a href="/blog">Blog</a>
        <a href="/playbooks">Playbooks</a>
        <a href="https://github.com/systempromptio/systemprompt-template">Get Started</a>
        <a href="/sitemap.xml">Sitemap</a>
        <a href="/llms.txt">llms.txt</a>
      </div>
      <div class="footer-links">
        <h4>Features</h4>
        <a href="/features/agentic-mesh">Agentic Mesh</a>
        <a href="/features/self-hosted-ai-platform">Embedded AI Library</a>
        <a href="/features/unified-control-plane">Unified Control Plane</a>
        <a href="/features/closed-loop-agents">The Closed Loop</a>
      </div>
      <div class="footer-links">
        <h4>Legal</h4>
        <a href="/legal/privacy-policy">Privacy Policy</a>
        <a href="/legal/cookie-policy">Cookie Policy</a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Your Company. All rights reserved.</p>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script src="/js/docs.js"></script>
  <!-- Analytics -->
<script src="/files/js/analytics.js" defer></script>
<!-- Mobile Menu Toggle -->
<script src="/js/mobile-menu.js" defer></script>

</body>
</html>
